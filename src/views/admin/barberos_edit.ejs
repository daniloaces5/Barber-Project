<%- include("../partials/head") %>

  <body class="bg-white min-h-screen flex flex-col">
    <%- include("../partials/header") %>
      <section class="flex-1 flex items-center justify-center py-12 px-4">
        <div
          class="w-full max-w-5xl rounded-2xl py-12 px-8 md:px-16 mx-auto shadow-2xl border border-gray-200 bg-white">

          <!-- Título principal -->
          <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-900">Editar Panel Servicios</h2>
            <p class="text-gray-500 mt-2">Seleccione qué desea editar</p>
          </div>

          <!-- Lista de servicios -->
          <div class="space-y-4">

            <div class="flex items-center justify-center px-4 py-10">

              <div class="bg-white w-full rounded-2xl shadow-xl border border-gray-200 p-8">

                <!-- Título -->
                <div class="mb-8">
                  <h2 class="text-3xl font-bold text-gray-900">
                    <%= barbero ? "Editar barbero" : "Agregar nuevo barbero" %>
                  </h2>
                  <p class="text-gray-600 mt-1">
                    <%= barbero ? "Actualiza los datos del barbero." : "Introduce la información del nuevo barbero." %>
                  </p>
                </div>

                <!-- FORMULARIO -->
                <form action="<%= barbero ? `/admin/barberos/${barbero[0].id}/editar` : '/admin/barberos/agregar' %>"
                  method="POST" class="space-y-6">

                  <!-- Nombre -->
                  <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Nombre del barbero</label>
                    <input type="text" name="name" value="<%= barbero ? barbero[0].name : '' %>"
                      placeholder="Ej: Carlos Mendoza" required
                      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                  </div>

                  <!-- Especialidad -->
                  <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Especialidad</label>
                    <input type="text" name="skill" value="<%= barbero ? barbero[0].specialty : '' %>"
                      placeholder="Ej: Fade, Corte Clásico, Barba" required
                      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                  </div>

                  <!-- Experiencia -->
                  <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Puntuacion</label>
                    <input type="number" name="experience" value="<%= barbero ? barbero[0].rating : '' %>"
                      placeholder="Ej: 4,5" required
                      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                  </div>

                  <!-- Foto -->
                  <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Foto (URL)</label>
                    <input type="url" name="photo" value="<%= barbero ? barbero[0].img : '' %>"
                      placeholder="https://..."
                      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition">
                  </div>

                  <!-- Servicios que ofrece -->
                  <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Servicios que ofrece</label>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">

                      <% servicios.forEach(serv=> { %>

                        <label class="flex items-center gap-2 p-3 border rounded-xl cursor-pointer hover:bg-gray-50">
                          <input type="checkbox" name="servicios[]" value="<%= serv.id %>"<% if (serviciosDelBarbero.includes(serv.id)) { %> checked <% } %>>
                            <span>
                              <%= serv.name %> — <%= serv.duration %> min
                            </span>
                        </label>

                        <% }) %>

                    </div>
                  </div>

                  <!-- Botón -->
                  <button type="submit"
                    class="w-full py-3 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white text-lg font-semibold shadow-md transition">
                    <%= barbero ? "Guardar cambios" : "Agregar barbero" %>
                  </button>

                </form>

                <!-- Botón volver -->
                <div class="mt-6 flex justify-center">
                  <a href="/admin/barberos" class="text-gray-600 hover:text-gray-800 font-semibold transition">
                    ← Volver a la lista de barberos
                  </a>
                </div>

              </div>
            </div>


          </div>

        </div>
      </section>

      <%- include("../partials/footer") %>
        <script src="/js/2_service.logic.js"></script>
  </body>

  </html>